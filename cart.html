<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <title>Carrito De Compras</title>

    <!-- favicon -->
    <link
      rel="shortcut icon"
      href=".img/BARRIGAS FELICES.png"
      type="image/x-icon"
    />

    <link rel="stylesheet" href="./styles/menuyfooter.css" />
    <link rel="stylesheet" href="styles/fontello.css" />
    <link rel="stylesheet" href="styles/cart.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@100;200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/fontawesome.min.css"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body>
    <!-- main header -->
    <header class="main-header">
      <!--MENU PARTE 1 -->
      <div class="btn-menu">
        <label for="btn-menu" class="icon-menu"></label>
      </div>
      <!--MENU PARTE 1 END -->

      <div class="logo-box">
        <a href="./index.html">
          <img src=".img/BARRIGAS FELICES.png" alt="" />
        </a>
      </div>
      <div class="main-icons">
        <div class="shopping-icon">
          <a href="cart.html"
            ><i class="fa-solid fa-cart-shopping"></i>
            </a
          >
        </div>
      </div>
    </header>

    <!-- MENU PARTE 2 -->
    <input type="checkbox" id="btn-menu" />
    <div class="container-menu">
      <div class="cont-menu">
        <figure class="log-menu">
          <img src=".img/BARRIGAS FELICES.png" alt="" />
        </figure>
        <nav>
          <hr />

          <a href="index.html">Inicio</a>
          <a href="#listado">Lista de productos</a>
          <a href="./contactos.html">Contacto</a>
        </nav>
        <label for="btn-menu" class="icon-cancel"></label>
      </div>
    </div>
    <!--MENU PARTE 2 END -->

    <!-- main-header end -->

    <!-- Carrito de compras -->

    <div class="contenedorprincipal">
      <div class="contenedor1">
        <div class="titulopro">
          <h1>AQUI PUEDES GESTIONAR <span>TUS PRODUCTOS</span></h1>
        </div>
        <div class="productostotal">
          <div class="continer">
            <section id="menu1">
              <a class="a" href="#menu1">PRESTO</a>

              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">COMBO PERRO TITAN</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Combo Perro Titan.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">26.100$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">COMBO HAMBURGUESA PREMIUM</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Combo Hamburguesa Titan.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">36.600$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">SUPER PERRO PRESTO</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Super perro presto.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">20.100$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
            </section>

            <section id="menu2">
              <a class="a" href="#menu2">COSECHAS</a>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">VERDE FIT</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Verde fit.png"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">9.300$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">SANDIA - FRESA - LIMON</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Sandia fresa limon.png"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">8.900$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">MARIPOSA NARANJA</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Mariposa Naranja.png"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">9.500$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
            </section>
            <section id="menu3">
              <a class="a" href="#menu3">DON JACOBO</a>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">GENOVESA CLASICA</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Genovesa clasicaa.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">29.900$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">TORTA DE CHOCOLATE INTENSO</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Torta chocolate intenso.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">29.900$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">VASO DE HELADO</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Helado.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">3.000$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
            </section>

            <section id="menu4">
              <a class="a" href="#menu4">SUBWAY</a>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">COMBO SUB PAVO JAMON</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/sandwich pavo jamon+.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">15.750$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">COMBO COSTILLAS BBQ</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Sandwich costillas bbq.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">21.900$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
              <div class="item">               
                <div class="contenedorimgtitle1">
                  <div class="itemTitle" id="name">VEGETARIANO CON GUACAMOLE</div>
                  <div id="image">
                    <img
                      class="itemImage"
                      src="./.img/Sandwich vegetariano.PNG"
                      alt=""
                    />
                  </div>             
                </div>
                <div class="itemPrice">14.700$</div>
                <button class="addToCart" id="añadir">--> ¡AÑADIR! <--</button>
              </div>
            </section>
          </div>
        </div>
      </div>
      <div class="contenedor2">
        <div class="titulocart">
          <h1>AQUI PUEDES GESTIONAR <span>TUS COMPRAS</span></h1>
        </div>

        <div class="continerShoppingCart">
          <div class="iniciotabla">
            <div class="producto">Producto</div>
            <div class="precio">Precio</div>
            <div class="cantidad">Cantidad</div>
          </div>
          <div class="shoppingCartItemsContainer"></div>
          <div class="comprar">
            <div class="total">Total:</div>
            <div class="shoppingCartTotal"></div>
            <button class="comprarButton">Comprar</button></a>
          </div>
        </div>
      </div>
      

      <!--Carrito de Compras script-->

    <script>
      const addToShoppingCartButtons = document.querySelectorAll(".addToCart");
      addToShoppingCartButtons.forEach((addToCartButton) => {
        addToCartButton.addEventListener("click", addToCartClicked);
      });

      const comprarButton = document.querySelector('.comprarButton');
      comprarButton.addEventListener('click', comprarButtonClicked);

      const shoppingCartItemsContainer = document.querySelector(
        ".shoppingCartItemsContainer"
      );

      function addToCartClicked(event) {
        const button = event.target;
        const item = button.closest(".item");

        const itemTitle = item.querySelector(".itemTitle").textContent;
        const itemPrice = item.querySelector(".itemPrice").textContent;
        const itemImage = item.querySelector(".itemImage").src;

        addItemToShoppingCart(itemTitle, itemPrice, itemImage);
      }

      function addItemToShoppingCart(itemTitle, itemPrice, itemImage) {
        const elementsTitle = shoppingCartItemsContainer.getElementsByClassName('shoppingCartItemTitle');

        
        for(let i = 0; i < elementsTitle.length; i++){
            if(elementsTitle[i].innerText === itemTitle){
            let elementQuantity = elementsTitle[i].parentElement.parentElement.parentElement.querySelector('.shoppingCartItemQuantity');
            elementQuantity.value++;
            upadeShoppingCartTotal()
            return;        
            }
        }
        


        const shoppingCartRow = document.createElement("div");
        const shoppingCartContent = `
        <div class="shoppingCartItem">
          <div class="carttabla">
            <div class="contenedorimgtitle">
              <div class="imgcontiner"><img class="image1" src=${itemImage} alt="" /></div>
              <div class="shoppingCartItemTitle">${itemTitle}</div>
            </div>    
            <div class="shoppingCartItemPrice">${itemPrice}</div>
            <input class="shoppingCartItemQuantity" type="number" value="1"/>
            <div><button class="buttonDelete">X</button></div>
          </div>
        </div>`;
        shoppingCartRow.innerHTML = shoppingCartContent;
        shoppingCartItemsContainer.append(shoppingCartRow);

        shoppingCartRow.querySelector('.buttonDelete').addEventListener('click', removeShoppingCartItem);

        shoppingCartRow.querySelector('.shoppingCartItemQuantity').addEventListener('change', quantityChanged);

        upadeShoppingCartTotal();
      }
      function upadeShoppingCartTotal (){
        let total = 0;
        const ShoppingCartTotal = document.querySelector('.shoppingCartTotal');

        const shoppingCartItems = document.querySelectorAll('.shoppingCartItem');

        shoppingCartItems.forEach((shoppingCartItem) => {
            const shoppingCartItemPriceElement = shoppingCartItem.querySelector('.shoppingCartItemPrice'); 

            const shoppingCartItemPrice = Number(shoppingCartItemPriceElement.textContent.replace('$',''));

            const shoppingCartItemQuantityElement =shoppingCartItem.querySelector('.shoppingCartItemQuantity');

            const shoppingCartItemQuantity = Number(shoppingCartItemQuantityElement.value);

            total = total + shoppingCartItemPrice * shoppingCartItemQuantity;
            
            
        });
        ShoppingCartTotal.innerHTML = `${total.toFixed(3)}$`
    }
    function removeShoppingCartItem(event){
        const buttonClicked = event.target;

        buttonClicked.closest('.shoppingCartItem').remove();
        upadeShoppingCartTotal();
    }
    function quantityChanged(event){
        const input = event.target;
        if(input.value <=0){
            input.value = 1;
        }
        upadeShoppingCartTotal();
    }
    function comprarButtonClicked(){
        shoppingCartItemsContainer.innerHTML = '';
        upadeShoppingCartTotal()
    }


    </script>
    <!--Carrito de Compras script END-->


    <!-- Carrito de compras END -->

    <!-- main-footer -->
    <footer class="main-footer">
      <figure class="footer-logo">
        <a href="index.html"><img src=".img/BARRIGAS FELICES.png" alt="" /></a>
      </figure>

      <div class="footer-widget">
        <div class="widget-title">
          <h3>Contactanos</h3>
        </div>
        <div class="widget-content">
          <ul class="links-list">
            <li>4708 Ruecker Wall, <br />Kassandratown, HI</li>
            <li><a href="tel:23055873407">+2(305) 587-3407</a></li>
            <li><a href="mailto:info@example.com">info@example.com</a></li>
          </ul>
        </div>

        <ul class="footer-social">
          <li>
            <a href="#"><i class="fab fa-facebook-f"></i></a>
          </li>
          <li>
            <a href="#"><i class="fab fa-twitter"></i></a>
          </li>
          <li>
            <a href="#"><i class="fab fa-vimeo-v"></i></a>
          </li>
          <li>
            <a href="#"><i class="fab fa-google-plus-g"></i></a>
          </li>
        </ul>
      </div>
    </footer>
    <div class="end-footer">
      <span>Food © 2020 All Right Reserved</span>
    </div>
    <!-- main-footer end -->
  </body>
</html>
